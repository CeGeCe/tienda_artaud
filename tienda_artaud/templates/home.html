{% extends 'base.html' %}
{% load static %}

{% block title %}Inicio | Tienda Artaud{% endblock %}

{% block content %}

<h1 style="text-align: center; margin-bottom: 40px;">¬°Bienvenido a la Tienda Artaud!</h1>

<div class="carousel-wrapper">
    <h2 class="carousel-title" style="text-align: center; color: var(--color-navbar);">
        üíø √öltimos Ingresos
    </h2>

    <div class="carousel-content" id="product-carousel">
        {% for producto in productos %}
        <div class="carousel-item-card">
            <a href="{% url 'detalle_producto' pk=producto.pk %}" style="text-decoration: none; color: inherit;">
                <div class="card-image-container" style="height: 200px;">
                    {% if producto.imagen_portada %}
                    <img src="{{ producto.imagen_portada.url }}" alt="{{ producto.album }}" class="card-image">
                    {% else %}
                    <img src="{% static 'tienda_artaud/sin_imagen.png' %}" alt="Sin imagen" class="card-image"
                        style="object-fit: contain;">
                    {% endif %}
                </div>

                <div class="card-content" style="padding: 10px;">
                    <h3 style="color: var(--color-navbar); font-size: 1em; height: auto;">
                        {{ producto.artista }} - {{ producto.album|truncatechars:30 }}
                    </h3>
                    <p class="card-metadata" style="margin-top: 5px;">
                        {{ producto.get_formato_display }} | {{ producto.get_condicion_display }}
                    </p>
                    <span class="producto-precio" style="font-size: 1.3em; margin-top: auto;">
                        ${{ producto.precio|floatformat:2 }} 
                        {# ‚¨ÜÔ∏è Aseg√∫rate de que esto est√© as√≠. Si se ve√≠a `{{ producto.precio|floatformat:2 }}` en la imagen, es un error de sintaxis. #}
                    </span>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>

    <button class="carousel-nav-btn prev" onclick="scrollCarousel(-1)">&#10094;</button>
    <button class="carousel-nav-btn next" onclick="scrollCarousel(1)">&#10095;</button>

</div>

<div style="text-align: center; margin-top: 50px;">

    <a href="{% url 'catalogo' %}" class="btn-action-home"">
        Ver Cat√°logo Completo üîç
    </a>

    <a href="{% if user.is_authenticated %}{% url 'publicar_producto' %}{% else %}{% url 'account_login' %}?next={% url 'publicar_producto' %}{% endif %}" 
        class="btn-action-home secondary">
        Publicar un Producto üìù
    </a>
</div>

<script src="{% static 'tienda_artaud/scripts/carrusel.js' %}"></script>

{% endblock content %}