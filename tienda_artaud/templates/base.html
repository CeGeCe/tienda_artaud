{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Tienda Artaud{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'tienda_artaud/styles.css' %}">
</head>

<body>

    <nav class="navbar">
        <div class="navbar-brand">
            <a href="{% url 'home' %}">
            <span class="brand-text">Tienda Artaud</span>

            <img src="{% static 'tienda_artaud/artaud_logo.png' %}" alt="Logo Tienda Artaud" 
                style="height: 40px; vertical-align: middle; margin-left: 10px; margin-right: 10px;">
            </a>

            <a href="{% url 'about' %}" style="color: white; font-size: 0.8em; padding: 0 10px;">
            Sobre nosotros
            </a>
        </div>

        <div class="navbar-links">
    
            <button id="dark-mode-toggle" onclick="toggleDarkMode()" 
                    style="background: none; border: none; color: white; cursor: pointer; font-size: 1.2em; margin-right: 15px;" 
                    aria-label="Alternar modo oscuro">
                ‚òÄÔ∏è
            </button>

            <a href="{% url 'home' %}">Inicio</a>
            <a href="{% url 'catalogo' %}">Cat√°logo</a>
            
            {% if user.is_authenticated %}

                <div class="dropdown">
                    <a href="#">Mi Gesti√≥n ‚ñº</a>
                    <div class="dropdown-content">
                        <a href="{% url 'mis_productos' %}">Mis Productos</a>
                        <a href="{% url 'panel_ventas' %}">Panel de Ventas üí∏</a>
                    </div>
                </div>
                
                <div class="dropdown">
                    <a href="#"">Mi Cuenta ({{ user.username }}) ‚ñº</a>
                    <div class="dropdown-content">

                        <a href="{% url 'ver_favoritos' %}">Mis Favoritos ‚ù§Ô∏è</a>
                        <a href="{% url 'ver_carrito' %}">Mi Carrito üõí</a>
                        <a href="{% url 'ver_pedidos' %}">Mis Compras</a>
                        
                        {% if user.is_superuser or user.is_staff %}
                            <hr style="border-top: 1px solid #555; margin: 0;">
                            <a href="{% url 'admin:index' %}">Acceso Admin</a>
                        {% endif %}
                        
                        <hr style="border-top: 1px solid #555; margin: 0;">
                        <form method="post" action="{% url 'account_logout' %}" style="display: block; padding: 0;">
                            {% csrf_token %}
                            <button type="submit" 
                                    style="width: 100%; text-align: left; 
                                        background: none; border: none; color: var(--color-texto-nav); 
                                        cursor: pointer; padding: 10px 16px; font-size: 1em;">
                                Cerrar Sesi√≥n
                            </button>
                        </form>
                    </div>
                </div>

            {% else %}
                <a href="{% url 'account_login' %}">Ingresar / Registrarse</a>
            {% endif %}
        </div>
    </nav>

<main class="content-container">
    <div class="search-bar-full-width"> 
        <div class="search-bar-inner-container"> 
            
            <form action="{% url 'catalogo' %}" method="get" style="display: flex; gap: 10px; align-items: center;">

                <input type="text" name="q" placeholder="Buscar por Artista, √Ålbum, Sello, Pa√≠s, etc." 
                    value="{{ request.GET.q|default:'' }}" 
                    class="search-input">

                <button type="button" id="voice-search-button" class="voice-search-btn" 
                aria-label="B√∫squeda por voz">
                üé§
                </button>

                <button type="submit" class="search-button">
                    üîçÔ∏é
                </button>

                {% if request.GET.q %}
                <a href="{% url 'catalogo' %}" class="search-clear-link">Borrar</a>
                {% endif %}
            </form>
        </div>
    </div>

    {% if messages %}
        <div class="message-container">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                    <span class="close-btn" onclick="this.parentElement.style.display='none';">&times;</span>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    {% block content %}
    {% endblock content %}
</main>

<script src="{% static 'tienda_artaud/scripts/theme.js' %}"></script>
<script src="{% static 'tienda_artaud/scripts/busq_voz.js' %}"></script>
<script src="{% static 'tienda_artaud/scripts/catalogo_sort.js' %}"></script>
<script src="{% static 'tienda_artaud/scripts/zoom.js' %}"></script>

<footer class="main-footer">
    <div class="footer-container">
        <div class="footer-col">
            <h4>Navegaci√≥n</h4>
            <a href="{% url 'home' %}">Inicio</a>
            <a href="{% url 'catalogo' %}">Cat√°logo</a>
            <a href="{% url 'about' %}">Sobre Nosotros</a>
        </div>
        <div class="footer-col">
            <h4>Mi Cuenta</h4>
            <a href="{% url 'account_login' %}">Ingresar</a>
            <a href="{% url 'ver_pedidos' %}">Mis Compras</a>
            <a href="{% url 'mis_productos' %}">Mis Productos</a>
        </div>
        <div class="footer-col">
            <h4>Legal</h4>
            <a href="#">T√©rminos y Condiciones</a>
            <a href="#">Pol√≠tica de Privacidad</a>
            <a href="#">Ayuda y Soporte</a>
        </div>
        <div class="footer-col">
            <h4>Contacto</h4>
            <p>Email: info@tienda-artaud.com</p>
            <p>Tel: +54 11 5555-ARTAUD</p>
        </div>
        <div class="footer-col">
            <h4>Redes Sociales</h4>
            <div>
                <a href="https://facebook.com" aria-label="Facebook">Facebook</a>
                <a href="https://instagram.com" aria-label="Instagram">Instagram</a>
                <a href="https://twitter.com" aria-label="Twitter">X (Twitter)</a>
                <a href="https://tiktok.com" aria-label="TikTok">TikTok</a>
            </div>
        </div>
    </div>
    <div class="footer-copy">
        &copy; 2025 Tienda Artaud. Todos los derechos reservados.
    </div>
</footer>

</body>
</html>